# Инструкции за добавяне на лекарите в Supabase

## Метод 1: Използване на SQL скрипта (Препоръчван)

### Стъпки:

1. **Отворете Supabase Dashboard**
   - Отидете на https://app.supabase.com/
   - Влезте в акаунта си

2. **Отворете SQL Editor**
   - От левия панел, щракнете на "SQL Editor"
   - Щракнете на "New Query"

3. **Копирайте SQL командите**
   - Отворете файла `supabase/migrations/INSERT_DOCTORS.sql` от този проект
   - Копирайте целия SQL код
   - Поставете го в Supabase SQL Editor

4. **Изпълнете командите**
   - Щракнете на "Run" или натиснете `Ctrl+Enter`
   - Чакайте съобщението за успех

5. **Проверете резултатите**
   - Щракнете на "Run" на последните две SELECT команди
   - Трябва да видите всички 13 лекаря в таблицата

---

## Метод 2: Копирайте командите една по една

Ако срещнете проблеми с едновременното изпълнение:

1. Копирайте всяко INSERT statement поотделно
2. Изпълнете всяко поотделно в Supabase SQL Editor
3. Чакайте потвърждение за всяко успешно добавяне

---

## Метод 3: Добавяне чрез Суpabase Data Editor

Ако предпочитате графичен интерфейс:

1. **Отворете Supabase Dashboard**
2. **От левия панел, отидете на "Database" → "Tables"**
3. **Щракнете на таблицата "doctors"**
4. **Щракнете на "Insert row"**
5. **Попълнете данните за всеки лекар вручно**

---

## Проверка на добавянето

След добавяне, трябва да видите в таблицата "doctors":

```sql
SELECT name, specialty, email, phone FROM doctors ORDER BY specialty, name;
```

**Очаквани резултати:**
- 13 лекаря общо (3 съществуващи + 10 нови)
- Всички должни да имат email, телефон и адрес
- Специалностите: 13 различни

---

## Проверка в приложението

1. **Стартирайте приложението**
   - Отворете VS Code
   - Използвайте `npm run dev` в терминала
   - Отворете браузъра на `http://localhost:5173`

2. **Отидете на "Лекари" страница**
   - Трябва да видите всички 13 лекаря в картите

3. **Проверете детайлите**
   - Всяка карта трябва да показа:
     - Име
     - Специалност
     - Email
     - Телефон
     - Адрес
     - Работни часове

---

## Данни за лекарите

### Нови специалности:
1. **Педиатър** - Елена Николова
2. **Ортопед** - Атанас Минчев
3. **Невролог** - Валентина Петрова
4. **Офталмолог** - Младен Стефанов
5. **Ендокринолог** - Мирослава Захариева
6. **Гастроентеролог** - Светослав Тодоров
7. **Уролог** - Розалина Борисова
8. **Пулмолог** - Иванка Стойчева
9. **Психиатър** - Никола Павлов
10. **Ревматолог** - Стефан Василев

### Съществуващи специалности (запазени):
1. **Кардиолог** - Иван Петров
2. **Дерматолог** - Мария Димитрова
3. **Хирург** - Георги Стоянов

---

## Файлове с данни

Проектът съдържа следните файлове с информация за лекарите:

1. **supabase/migrations/INSERT_DOCTORS.sql** - SQL команди за добавяне в Supabase
2. **supabase/migrations/supabase-setup.sql** - Пълна SQL конфигурация на базата данни (с нови лекари)
3. **DOCTORS_DATA.md** - Детайлна информация за всеки лекар
4. **doctors_data.json** - JSON структура на лекарските данни

---

## Отстраняване на проблеми

### Проблем: "email должна да е уникален"
**Решение:** Проверете дали лекарът вече не е добавен. Използвайте `ON CONFLICT (email) DO NOTHING;` който е вече в SQL скрипта.

### Проблем: Лекарите не се показват в приложението
**Решение:** 
- Опреснете браузъра (F5)
- Проверете, че SQL командите са изпълнени успешно
- Проверете RLS политики в Supabase

### Проблем: Грешка при изпълнение на SQL
**Решение:**
- Копирайте командите една по една
- Проверете, че таблицата "doctors" съществува
- Проверете конекцията към Supabase

---

## Дефиниране на таблица doctors

Таблицата трябва да има следната структура:

```sql
CREATE TABLE doctors (
  id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
  name TEXT NOT NULL,
  specialty TEXT,
  phone TEXT,
  address TEXT,
  email TEXT UNIQUE NOT NULL,
  work_hours_from TIME DEFAULT '08:00',
  work_hours_to TIME DEFAULT '17:00',
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);
```

Всички필드, които използваме, са уже дефинирани в таблицата.

---

## Следващи стъпки

След добавяне на лекарите:

1. Проверете че се показват в страницата "Лекари"
2. Опитайте да направите резервация с един от новите лекари
3. Проверете съхранение на резервациите в таблицата "appointments"

---

## Контакт

Ако срещнете проблеми при добавянето на лекарите, проверете:
- Supabase документация: https://supabase.com/docs
- База данни конфигурация: вижте DATABASE_SETUP.md

---

Последна актуализация: 5 февруари 2026
